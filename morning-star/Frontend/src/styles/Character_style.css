@import url('https://fonts.googleapis.com/css2?family=Jaini&display=swap');

* { box-sizing: border-box; }

::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #0b0909; }
::-webkit-scrollbar-thumb { background: #5e3a03; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #835F0A; }

html, body {
    margin: 0; padding: 0; width: 100%; min-height: 100vh;
    background-color: #0b0909; 
    color: #e0e0e0;
    font-family: "Jaini", system-ui;
    overflow-x: hidden;
}

#root { min-height: 100vh; display: flex; flex-direction: column; }

.char-info-wrapper {
    display: flex; flex-direction: column; min-height: 100vh; width: 100%;
    background-image: 
        radial-gradient(circle at 50% 0%, rgba(69, 43, 2, 0.15) 0%, transparent 70%),
        linear-gradient(0deg, #050404 0%, #120c08 100%);
}

.char-info-wrapper > header, .char-info-wrapper > footer { flex: 0 0 auto; }

.hud-panel {
    margin-top: 100px; 
    padding: 15px 40px;
    display: flex; justify-content: space-between; align-items: center;
    background: rgba(18, 12, 8, 0.9);
    border-top: 1px solid #5e3a03;
    border-bottom: 1px solid #5e3a03;
    box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    z-index: 10;
}

.hud-left { display: flex; gap: 20px; align-items: center; }
.hud-avatar { width: 70px; height: 70px; border: 2px solid #835F0A; border-radius: 8px; overflow: hidden; background: #000; }
.hud-avatar img { width: 100%; height: 100%; object-fit: cover; }

.hud-info h1 { margin: 0; font-size: 36px; line-height: 1; color: #fff; text-shadow: 0 2px 4px #000; }
.hud-sub { color: #aaa; font-size: 18px; margin-bottom: 5px; }

/* XP Bar */
.hud-xp-bar {
    width: 300px; height: 20px; background: #2a1a05; border: 1px solid #5e3a03; border-radius: 4px;
    position: relative; overflow: hidden; cursor: pointer;
}
.hud-xp-fill { height: 100%; background: linear-gradient(90deg, #d32f2f, #b71c1c); transition: width 0.5s ease; }
.hud-xp-text { position: absolute; width: 100%; text-align: center; top: 0; line-height: 18px; font-size: 12px; color: #fff; text-shadow: 1px 1px 2px #000; letter-spacing: 1px; font-family: sans-serif; font-weight: bold; }

.hud-stats { display: flex; gap: 20px; align-items: center; }

/* Hexagon Stats (AC, Speed, Prof) */
.hud-stat-hex {
    width: 55px; height: 60px;
    background: #1a120b; border: 1px solid #5e3a03;
    /* Кліп-шлях для форми щита/гекса */
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    cursor: pointer; transition: transform 0.2s;
}
.hud-stat-hex:hover { transform: scale(1.1); border-color: #ffc400; background: #3d2608; }
.hex-val { font-size: 22px; color: #fff; line-height: 1; font-weight: bold; }
.hex-lbl { font-size: 11px; color: #888; margin-top: 2px; }

.hud-stat-pill {
    padding: 5px 15px; background: #1a120b; border: 1px solid #5e3a03; border-radius: 20px;
    font-size: 22px; color: #fff; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 5px;
}
.hud-stat-pill:hover { border-color: #ffc107; background: #25180b; }

.hud-hp-block {
    display: flex; align-items: center; gap: 10px; padding: 5px 20px;
    background: linear-gradient(145deg, #3e1616, #220a0a);
    border: 1px solid #ef5350; border-radius: 8px; cursor: pointer;
    box-shadow: 0 0 10px rgba(211, 47, 47, 0.3);
}
.hud-hp-block:hover { filter: brightness(1.2); }
.hud-hp-icon { width: 28px; height: 28px; }
.hud-hp-vals { font-size: 26px; color: #fff; font-weight: bold; }
.max-hp { font-size: 18px; color: #ffcdd2; font-weight: normal; }


.dashboard-grid {
    display: flex; 
    gap: 20px;
    padding: 20px 40px;
    flex: 1; 
    min-height: 0;
}

.col-attributes {
    width: 120px;
    flex-shrink: 0;
    display: flex; flex-direction: column; gap: 10px;
    overflow-y: auto; padding-right: 5px;
}

.v-stat-card {
    background: #15100d; border: 1px solid #5e3a03; border-radius: 6px;
    height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer; position: relative; overflow: hidden;
    transition: all 0.2s;
}
.v-stat-card:hover { border-color: #ffc400; background: #1f1814; transform: translateX(5px); }
.v-stat-mod { font-size: 36px; color: #fff; font-weight: bold; line-height: 1; text-shadow: 0 0 5px #ffc400; }
.v-stat-val { font-size: 14px; color: #888; border: 1px solid #444; border-radius: 10px; padding: 0 8px; margin: 4px 0; background: #000; }
.v-stat-name { font-size: 12px; text-transform: uppercase; color: #aaa; letter-spacing: 1px; }
.v-stat-save-tiny { font-size: 10px; color: #666; position: absolute; bottom: 2px; }


.col-action-deck {
    flex: 1; 
    display: flex; flex-direction: column; gap: 20px;
    min-width: 400px;
}

.combat-quick-row { display: flex; gap: 15px; }
.quick-stat {
    flex: 1; background: #1a120b; border: 1px solid #5e3a03; border-radius: 6px;
    height: 70px; display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer; transition: 0.2s;
}
.quick-stat:hover { border-color: #aaa; background: #251b12; }
.qs-val { font-size: 32px; color: #fff; line-height: 1; }
.qs-label { font-size: 12px; color: #888; letter-spacing: 1px; text-transform: uppercase; }

.deck-tabs-wrapper {
    flex: 1; display: flex; flex-direction: column;
    background: rgba(18, 12, 8, 0.6); border: 1px solid #5e3a03; border-radius: 8px;
    overflow: hidden;
    min-height: 400px; /* Мінімальна висота, щоб не зникало */
}

.deck-nav {
    display: flex; background: #120c08; border-bottom: 1px solid #5e3a03;
}
.deck-nav label {
    flex: 1; text-align: center; padding: 15px; font-size: 22px; color: #888; cursor: pointer; transition: 0.2s;
}
.deck-nav label:hover { color: #ccc; background: #1a1512; }

#deck-atk:checked ~ .deck-nav label[for="deck-atk"],
#deck-spl:checked ~ .deck-nav label[for="deck-spl"],
#deck-inv:checked ~ .deck-nav label[for="deck-inv"] {
    color: #ffc400; border-bottom: 2px solid #ffc400; background: #1f1814;
}

.deck-content { flex: 1; overflow-y: auto; padding: 20px; }
.deck-pane { display: none; }
#deck-atk:checked ~ .deck-content .pane-atk,
#deck-spl:checked ~ .deck-content .pane-spl,
#deck-inv:checked ~ .deck-content .pane-inv { display: block; }

.fancy-table { width: 100%; border-collapse: collapse; }
.fancy-table th { text-align: left; color: #d32f2f; font-size: 20px; padding: 10px; border-bottom: 1px solid #5e3a03; }
.fancy-table td { padding: 10px 5px; border-bottom: 1px solid rgba(94, 58, 3, 0.3); }
.table-input { background: transparent; border: none; color: #e0e0e0; font-size: 20px; font-family: inherit; width: 100%; }
.table-input:focus { outline: none; color: #ffc400; }
.table-input.center { text-align: center; }


.col-skills-panel {
    width: 320px; flex-shrink: 0;
    background: rgba(18, 12, 8, 0.4); border-left: 1px solid #5e3a03;
    display: flex; flex-direction: column; 
    padding-left: 20px;
    height: 100%; overflow-y: auto;
}

.panel-header { font-size: 26px; color: #888; border-bottom: 1px solid #5e3a03; padding-bottom: 5px; margin-bottom: 10px; }

.skills-scroll-container { flex: 1; padding-right: 5px; }

.skill-strip {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 12px; margin-bottom: 4px; border-radius: 4px;
    cursor: pointer; transition: 0.1s;
}
.skill-strip:hover { background: rgba(255, 196, 0, 0.1); }

.skill-indicator { width: 10px; height: 10px; border: 1px solid #666; transform: rotate(45deg); margin-right: 15px; }
.skill-indicator.proficient { background: #ffc400; border-color: #ffc400; box-shadow: 0 0 5px #ffc400; }

.skill-name { flex: 1; font-size: 18px; color: #ccc; }
.skill-stat-tag { font-size: 12px; color: #666; margin-left: 5px; }
.skill-val { font-size: 18px; color: #fff; font-weight: bold; }

.passives-box {
    margin-top: 20px; padding-top: 20px; border-top: 1px solid #5e3a03;
}
.passive-line { font-size: 16px; color: #aaa; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }
.pv-val { color: #fff; font-weight: bold; background: #333; padding: 2px 8px; border-radius: 4px; font-size: 14px; }


.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: center; z-index: 1000; }

.modal-content.calculator-theme { background: #120c08; border: 2px solid #5e3a03; width: 420px; padding: 10px; box-shadow: 0 0 40px #000; font-family: "Jaini", system-ui; }
.calc-header { display: flex; justify-content: flex-end; padding-bottom: 10px; }
.close-btn { background: none; border: none; color: #888; font-size: 24px; cursor: pointer; }
.close-btn:hover { color: #fff; }

.calc-main-display { text-align: center; font-size: 56px; color: #fff; margin-bottom: 10px; line-height: 1; text-shadow: 0 0 15px rgba(0,0,0,0.8); }
.calc-val-accent { color: #4db6ac; } .calc-xp-accent { color: #7c4dff; }

.calc-input-screen { background: #1a1512; border: 1px solid #5e3a03; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; font-size: 32px; margin-bottom: 20px; border-radius: 4px; }
.calc-backspace-btn { background: none; border: none; color: #888; font-size: 28px; cursor: pointer; }

.calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
.calc-key { height: 60px; background: #2a1a05; border: 1px solid #5e3a03; color: #e0e0e0; font-size: 26px; cursor: pointer; font-family: "Jaini", system-ui; border-radius: 4px; transition: 0.1s; }
.calc-key:hover { background: #3d2608; border-color: #ffc400; }
.calc-key:active { transform: scale(0.95); }
.calc-icon-slot { display: flex; justify-content: center; align-items: center; font-size: 24px; opacity: 0.7; pointer-events: none; }

.calc-actions-row { display: flex; gap: 10px; }
.calc-action-btn { flex: 1; height: 55px; border: none; border-radius: 4px; font-family: "Jaini", system-ui; font-size: 20px; cursor: pointer; color: #fff; text-transform: uppercase; font-weight: bold; border: 1px solid rgba(0,0,0,0.3); }
.btn-temp { background: #424242; color: #bbb; border: 1px solid #666; }
.btn-heal { background: #2e7d32; border: 1px solid #1b5e20; } 
.btn-damage { background: #c62828; border: 1px solid #b71c1c; } 
.btn-add-xp { background: #1565c0; border: 1px solid #0d47a1; } 
.btn-level-up { background: #6200ea; border: 1px solid #4a148c; box-shadow: 0 0 15px #6200ea; }
.btn-settings-toggle { width: 55px; flex: none; background: #2a1a05; border: 1px solid #5e3a03; font-size: 24px; }
.btn-settings-toggle.active { color: #ffc400; border-color: #ffc400; }

.calc-settings-drawer { max-height: 0; overflow: hidden; transition: 0.3s; background: rgba(0,0,0,0.3); }
.calc-settings-drawer.open { max-height: 120px; padding: 20px; margin-top: 10px; border-top: 1px solid #5e3a03; }
.calc-settings-grid { display: flex; gap: 20px; }
.calc-input-group { flex: 1; display: flex; flex-direction: column; }
.calc-label { font-size: 14px; color: #888; text-transform: uppercase; font-family: sans-serif; font-weight: bold; margin-bottom: 5px; }
.calc-settings-input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-size: 20px; font-family: "Jaini"; width: 100%; padding-bottom: 2px; }
.calc-settings-input:focus { outline: none; border-color: #ffc400; }

.calc-coin-row { display: flex; gap: 15px; margin-bottom: 20px; padding: 0 10px; }
.calc-coin-btn { flex: 1; background: #1a1512; border: 1px solid #333; color: #888; padding: 10px; cursor: pointer; display: flex; flex-direction: column; align-items: center; border-radius: 4px; font-family: "Jaini"; }
.calc-coin-btn.active { background: #2a1a05; border-color: #ffc400; color: #fff; transform: translateY(-2px); }
.calc-coin-btn span { font-size: 14px; opacity: 0.7; }
.coin-pp.active { color: #e0e0e0; border-color: #e0e0e0; }
.coin-gp.active { color: #ffc107; border-color: #ffc107; }
.coin-sp.active { color: #bdbdbd; border-color: #bdbdbd; }
.coin-cp.active { color: #ff8a65; border-color: #ff8a65; }

.modal-content:not(.calculator-theme) { background: #1a120b; border: 2px solid #835F0A; width: 1250px; padding: 20px; border-radius: 8px; box-shadow: 0 0 30px #000; }
.modal-header { display: flex; justify-content: space-between; border-bottom: 1px solid #5e3a03; padding-bottom: 10px; margin-bottom: 20px; }
.modal-body { display: flex; gap: 20px; margin-bottom: 20px; }
.modal-field { flex: 1; display: flex; flex-direction: column; gap: 5px; }
.modal-input { width: 100%; background: #000; border: 1px solid #5e3a03; color: #fff; padding: 8px; font-size: 22px; text-align: center; border-radius: 4px; }
.save-btn { width: 100%; background: #835F0A; border: none; padding: 12px; color: #fff; font-family: "Jaini"; font-size: 22px; cursor: pointer; border-radius: 4px; transition: 0.2s; }
.save-btn:hover { background: #a07410; }

/* --- FIX FOR BUTTON VISIBILITY & SCROLLING --- */
.deck-content {
    flex: 1;
    overflow-y: auto; /* Дозволяє скролити вміст */
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.deck-pane {
    display: flex;
    flex-direction: column;
    height: 100%;
}

/* --- TABS NAVIGATION --- */
.deck-nav label.active {
    color: #ffc400; 
    border-bottom: 2px solid #ffc400; 
    background: #1f1814;
}

/* --- SPELL SETTINGS MODAL STYLES (DARK THEME) --- */
.spell-settings-modal {
    width: 800px;
    max-width: 95vw;
    background: #120c08;
    border: 2px solid #5e3a03;
    display: flex;
    flex-direction: column;
    max-height: 90vh; /* Щоб не вилазило за екран */
    color: #e0e0e0;
}

.spell-config-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

/* Header Stats */
.spell-stats-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    border-bottom: 1px solid #333;
    padding-bottom: 20px;
}
.stat-box label { display: block; color: #888; font-size: 12px; text-transform: uppercase; margin-bottom: 5px; }
.stat-box .stat-val { font-size: 24px; color: #fff; font-family: "Jaini"; }
.stat-box .stat-val.accent { font-size: 32px; color: #ffc400; }

/* Slots Grid */
.section-title { font-size: 18px; color: #e0e0e0; border-left: 3px solid #ffc400; padding-left: 10px; margin: 20px 0 15px 0; }
.slots-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
.slot-input-group { background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 4px; border-bottom: 1px solid #333; }
.slot-input-group label { display: block; font-size: 12px; color: #aaa; margin-bottom: 5px; text-transform: uppercase; }
.slot-input { width: 100%; background: transparent; border: none; color: #fff; font-size: 24px; font-family: "Jaini"; border-bottom: 1px solid #555; }
.slot-input:focus { outline: none; border-color: #ffc400; }

/* Spell Picker */
.class-filters { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 15px; }
.filter-chip { background: #1a1512; border: 1px solid #444; color: #aaa; padding: 5px 15px; border-radius: 15px; cursor: pointer; font-size: 14px; white-space: nowrap; }
.filter-chip.active { background: #ffc400; color: #000; border-color: #ffc400; font-weight: bold; }

.spell-picker-list { display: flex; flex-direction: column; gap: 8px; }
.spell-picker-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px; border: 1px solid transparent; }
.spell-picker-item:hover { background: rgba(255, 255, 255, 0.05); }
.spell-picker-item.learned { border-color: #2e7d32; background: rgba(46, 125, 50, 0.1); }
.spi-info { display: flex; flex-direction: column; }
.spi-name { font-size: 18px; color: #e0e0e0; }
.spi-meta { font-size: 12px; color: #777; }

.spi-btn { padding: 5px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; border: none; }
.spi-btn.add { background: #333; color: #fff; }
.spi-btn.add:hover { background: #ffc400; color: #000; }
.spi-btn.remove { background: transparent; color: #2e7d32; border: 1px solid #2e7d32; }

/* --- ATTACKS --- */
.attacks-list { display: flex; flex-direction: column; gap: 5px; margin-bottom: 15px; }
.attacks-header-row { display: grid; grid-template-columns: 2fr 1fr 1.5fr 1fr 30px; gap: 10px; padding: 5px 10px; color: #888; font-size: 14px; text-transform: uppercase; border-bottom: 1px solid #5e3a03; }
.attack-row { display: grid; grid-template-columns: 2fr 1fr 1.5fr 1fr 30px; gap: 10px; padding: 8px 10px; background: rgba(0,0,0,0.2); border-radius: 4px; align-items: center; border-bottom: 1px solid #333; }
.atk-input { background: transparent; border: none; color: #fff; font-family: "Jaini"; font-size: 18px; width: 100%; padding: 2px 5px; }
.atk-input:focus { background: #1a1512; outline: 1px solid #ffc400; }
.add-btn { background: #2e7d32; color: #fff; border: none; padding: 10px 15px; font-family: "Jaini"; font-size: 18px; cursor: pointer; border-radius: 4px; width: 100%; border: 1px solid #1b5e20; margin-top: auto; }
.add-btn:hover { background: #388e3c; }
.delete-btn { background: transparent; border: none; color: #666; font-size: 20px; cursor: pointer; }
.delete-btn:hover { color: #d32f2f; }

/* --- TEXTAREAS --- */
.epic-textarea { width: 100%; height: 100%; min-height: 250px; background: #0b0909; border: 1px solid #5e3a03; color: #e0e0e0; padding: 10px; font-family: "Jaini"; font-size: 18px; resize: none; border-radius: 4px; }
.epic-textarea:focus { outline: none; border-color: #ffc400; }

.spell-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 6px; }
.slots-preview { display: flex; gap: 8px; flex-wrap: wrap; }
.slot-badge { background: #1a120b; border: 1px solid #5e3a03; padding: 2px 8px; border-radius: 4px; font-size: 12px; color: #aaa; }
.slot-badge b { color: #ffc400; }
.settings-btn-long { background: #2a1a05; border: 1px solid #5e3a03; color: #e0e0e0; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-family: "Jaini"; font-size: 16px; }
.settings-btn-long:hover { background: #3d2608; border-color: #ffc400; }
.empty-msg { text-align: center; color: #666; margin-top: 30px; font-style: italic; }

/* --- SPELL TIER STYLES (NEW) --- */
.spells-container {
    display: flex;
    flex-direction: column;
    gap: 25px; /* Відступ між рівнями */
}

.spell-tier-block {
    background: rgba(0,0,0,0.2);
    border: 1px solid #333;
    border-radius: 6px;
    padding: 10px;
}

.tier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #5e3a03;
    padding-bottom: 8px;
    margin-bottom: 10px;
}

.th-left {
    display: flex;
    align-items: center;
    gap: 15px;
}

.th-title {
    font-size: 20px;
    color: #ffc400;
    font-family: "Jaini";
    text-transform: uppercase;
}

/* Slot Bubbles */
.slot-bubbles {
    display: flex;
    gap: 5px;
}

.slot-bubble {
    width: 14px;
    height: 14px;
    border: 1px solid #ffc400;
    border-radius: 50%;
    cursor: pointer;
    background: transparent;
    transition: 0.2s;
}

.slot-bubble:hover {
    transform: scale(1.2);
}

.slot-bubble.used {
    background: #ffc400; /* Зафарбований = використаний */
    box-shadow: 0 0 5px #ffc400;
}

.tier-add-btn {
    background: #2a1a05;
    border: 1px solid #5e3a03;
    color: #aaa;
    width: 28px;
    height: 28px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 18px;
    font-weight: bold;
}
.tier-add-btn:hover {
    color: #fff;
    border-color: #fff;
}

/* Tier Grid */
.tier-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 10px;
}

.tier-empty {
    font-style: italic;
    color: #555;
    font-size: 14px;
    padding: 10px;
}

/* Compact Spell Card */
.spell-card.compact {
    background: #15100d;
    border: 1px solid #444;
    padding: 10px;
    border-radius: 4px;
    box-shadow: none;
}

.spell-card.compact h4 {
    font-size: 18px;
    margin: 0;
    color: #e0e0e0;
}

.sc-top {
    display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px;
}

.sc-del {
    background: none; border: none; color: #555; cursor: pointer; font-size: 18px; line-height: 1;
}
.sc-del:hover { color: #d32f2f; }

.sc-meta {
    font-size: 12px; color: #888; margin-bottom: 2px;
}

.sc-dmg {
    font-size: 13px; color: #ef5350; font-weight: bold; margin-top: 5px;
    background: rgba(211, 47, 47, 0.1); padding: 2px 5px; border-radius: 3px; display: inline-block;
}

/* Filters in Modal */
.filters-row {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.filter-select {
    background: #1a1512;
    border: 1px solid #5e3a03;
    color: #e0e0e0;
    padding: 8px;
    font-family: "Jaini";
    font-size: 16px;
    border-radius: 4px;
    flex: 1;
}

.mt-20 { margin-top: 20px; }

/* --- WIDER & BETTER SPELL MODAL --- */

.spell-settings-modal {
    width: 1000px; /* Робимо вікно значно ширшим */
    max-width: 95vw;
    height: 85vh; /* Фіксована висота для кращого скролу всередині */
    background: #120c08;
    border: 2px solid #5e3a03;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
    color: #e0e0e0;
}

.spell-config-body {
    padding: 30px;
    overflow-y: auto; /* Скролиться тільки контент */
    flex: 1;
}

/* Header Stats */
.spell-stats-row {
    display: flex;
    justify-content: space-around;
    background: rgba(255, 255, 255, 0.03);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 30px;
    border: 1px solid #333;
}
.stat-box { text-align: center; }
.stat-box label { display: block; color: #888; font-size: 14px; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 1px;}
.stat-box .stat-val { font-size: 28px; color: #fff; font-family: "Jaini"; line-height: 1;}
.stat-box .stat-val.accent { color: #ffc400; font-size: 36px; }

/* Slots Grid */
.section-title { 
    font-size: 22px; color: #ffc400; 
    border-bottom: 1px solid #5e3a03; 
    padding-bottom: 10px; margin: 30px 0 20px 0; 
    font-family: "Jaini";
}

.slots-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Адаптивні колонки */
    gap: 15px; 
    margin-bottom: 40px; 
}
.slot-input-group { 
    background: #1a1512; padding: 10px; border-radius: 6px; border: 1px solid #333; text-align: center;
}
.slot-input-group label { display: block; font-size: 14px; color: #aaa; margin-bottom: 5px; }
.slot-input { 
    width: 50px; background: transparent; border: none; border-bottom: 2px solid #555; 
    color: #fff; font-size: 24px; font-family: "Jaini"; text-align: center;
}
.slot-input:focus { outline: none; border-color: #ffc400; }

/* --- СПИСОК ЗАКЛЯТЬ (GRID 2 КОЛОНКИ) --- */
.spell-picker-list {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Дві колонки */
    gap: 15px;
}

.spell-picker-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid #333;
    border-radius: 6px;
    transition: 0.2s;
}

.spell-picker-item:hover { background: rgba(255, 255, 255, 0.07); border-color: #555; }

/* Стиль для вже вивчених заклять */
.spell-picker-item.learned {
    border: 1px solid #2e7d32;
    background: rgba(46, 125, 50, 0.1);
}

.spi-info { display: flex; flex-direction: column; }
.spi-name { font-size: 20px; color: #fff; font-family: "Jaini"; }
.spi-meta { font-size: 13px; color: #888; text-transform: uppercase; margin-top: 2px;}

.spi-btn {
    padding: 8px 20px; border-radius: 4px; cursor: pointer; 
    font-weight: bold; border: none; font-size: 14px;
    transition: 0.2s;
}

.spi-btn.add {
    background: #ffc400; color: #000;
}
.spi-btn.add:hover { background: #ffca28; box-shadow: 0 0 10px rgba(255, 196, 0, 0.4); }

.spi-btn.remove {
    background: transparent; color: #4caf50; border: 1px solid #4caf50;
}
.spi-btn.remove:hover { background: rgba(76, 175, 80, 0.1); }

/* Filters */
.filters-row { display: flex; gap: 15px; margin-bottom: 20px; }
.filter-select {
    background: #000; border: 1px solid #5e3a03; color: #ffc400;
    padding: 10px; font-size: 16px; font-family: "Jaini"; border-radius: 4px;
    cursor: pointer; min-width: 150px;
}

.modal-footer {
    padding: 20px; border-top: 1px solid #333;
    display: flex; justify-content: flex-end;
}

/* --- SPELL SETTINGS MODAL (Based on Screenshot) --- */

.spell-settings-modal {
    width: 600px;
    max-width: 95vw;
    background: #100b05; /* Дуже темний коричневий */
    border: 2px solid #835F0A; /* Золота рамка */
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    max-height: 85vh;
    color: #e0e0e0;
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
}

.modal-section-title {
    font-family: "Jaini", system-ui;
    color: #e0e0e0;
    font-size: 32px;
    margin: 0 0 20px 0;
}

.spell-config-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

/* Filters */
.filters-row {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}

.filter-select {
    flex: 1;
    background: #1a120b;
    border: 1px solid #5e3a03;
    color: #e0e0e0;
    padding: 10px;
    font-family: "Jaini";
    font-size: 18px;
    border-radius: 4px;
    cursor: pointer;
}
.filter-select:focus { outline: none; border-color: #ffc400; }

/* Spell List Items */
.spell-picker-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.spell-picker-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid #333;
    border-radius: 6px;
    transition: 0.2s;
}

.spell-picker-item.learned {
    border-color: #2e7d32;
    background: rgba(46, 125, 50, 0.05);
}

.spi-info {
    display: flex;
    flex-direction: column;
}

.spi-name {
    font-size: 20px;
    color: #fff;
    font-family: "Jaini";
    font-weight: bold;
}

.spi-meta {
    font-size: 13px;
    color: #888;
    margin-top: 2px;
    text-transform: capitalize;
}

/* Buttons */
.spi-btn {
    padding: 6px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-family: "Jaini";
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: 0.2s;
}

.spi-btn.add {
    background: transparent;
    color: #888;
    border: 1px solid #555;
}
.spi-btn.add:hover {
    border-color: #ffc400;
    color: #ffc400;
}

.spi-btn.prepared {
    background: transparent;
    color: #4caf50;
    border: 1px solid #4caf50;
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.2);
}
.spi-btn.prepared:hover {
    background: rgba(76, 175, 80, 0.1);
}

.close-grimoire {
    width: 100%;
    background: #835F0A;
    color: #fff;
    border: none;
    font-size: 24px;
    padding: 15px;
    font-family: "Jaini";
    cursor: pointer;
}
.close-grimoire:hover {
    background: #a07410;
}

/* --- TIERED LIST IN MAIN VIEW --- */
.spell-tier-block {
    margin-bottom: 20px;
}

.tier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #333;
    padding-bottom: 5px;
    margin-bottom: 10px;
}

.th-left { display: flex; align-items: center; gap: 10px; }

.th-level-badge {
    background: #2a1a05;
    border: 1px solid #5e3a03;
    color: #ffc400;
    font-size: 12px;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
}

.th-title {
    font-size: 20px;
    color: #ccc;
    font-family: "Jaini";
}

.tier-add-btn {
    background: transparent;
    border: 1px solid #555;
    color: #888;
    padding: 2px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}
.tier-add-btn:hover { border-color: #ffc400; color: #ffc400; }

.tier-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 10px;
}

.spell-card.compact {
    background: #15100d;
    border: 1px solid #333;
    padding: 10px;
    border-radius: 4px;
    transition: 0.2s;
}
.spell-card.compact:hover { border-color: #5e3a03; background: #1f1814; }

.sc-top h4 { font-size: 18px; margin: 0; color: #e0e0e0; }
.sc-desc-preview { font-size: 12px; color: #666; margin-top: 5px; font-style: italic; line-height: 1.2;}

/* --- CLEAN ATTACK ROW STYLES (Based on screenshot) --- */

.attack-header-labels {
    display: flex;
    align-items: center;
    padding: 0 10px 5px 10px;
    border-bottom: 1px solid #3a3f4b;
    margin-bottom: 10px;
    font-family: sans-serif;
    font-size: 11px;
    font-weight: bold;
    color: #8fa3b0;
    text-transform: uppercase;
}

.lbl-name { flex: 1; }
.lbl-bonus { width: 60px; text-align: center; }
.lbl-dmg { width: 140px; }
.lbl-actions { width: 30px; text-align: right; }

.small-add-btn {
    background: #2a2e38;
    color: #8fa3b0;
    border: 1px solid #3a3f4b;
    width: 24px; height: 24px;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
    border-radius: 4px;
}
.small-add-btn:hover { background: #3a3f4b; color: #fff; }

.attacks-list-clean {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 20px;
}

.attack-row-clean {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Common Input Style */
.clean-input {
    background: transparent;
    border: none;
    color: #e0e0e0;
    font-family: sans-serif;
    font-size: 14px;
    outline: none;
}

/* Name Input (Underline style or simple box) */
.clean-input.name {
    flex: 1;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    padding: 10px;
    border-radius: 4px;
    font-weight: bold;
}
.clean-input.name:focus { border-color: #5b667a; }

/* Bonus Box (Square) */
.bonus-box {
    width: 60px;
    height: 45px;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
}
.clean-input.bonus {
    width: 100%;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
}

/* Damage Box (Rectangle) */
.damage-box {
    width: 140px;
    height: 45px;
    background: #2a2e38; /* Slightly lighter/different shade per screenshot */
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    display: flex;
    align-items: center;
    padding: 0 10px;
}
.clean-input.damage {
    width: 100%;
    font-size: 14px;
}

.clean-delete-btn {
    background: transparent;
    border: none;
    color: #555;
    font-size: 20px;
    cursor: pointer;
    width: 30px;
}
.clean-delete-btn:hover { color: #d32f2f; }


/* --- SHEET TEXTAREAS (Features & Traits) --- */
.sheet-section {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
}

.sheet-label {
    font-family: sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #8fa3b0;
    text-transform: uppercase;
    margin-bottom: 5px;
    border-bottom: 1px solid #3a3f4b;
    padding-bottom: 2px;
}

.sheet-textarea {
    width: 100%;
    min-height: 100px;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    color: #ccc;
    padding: 10px;
    font-family: sans-serif;
    font-size: 14px;
    resize: vertical;
    line-height: 1.5;
}
.sheet-textarea:focus {
    outline: none;
    border-color: #5b667a;
    background: #232833;
}

/* --- ATTACKS TAB (Styled like Screenshot) --- */

.attack-header-labels {
    display: flex;
    align-items: center;
    padding: 0 10px 5px 10px;
    border-bottom: 1px solid #3a3f4b;
    margin-bottom: 15px;
    font-family: sans-serif;
    font-size: 11px;
    font-weight: bold;
    color: #8fa3b0;
    text-transform: uppercase;
}

.lbl-name { flex: 1; }
.lbl-bonus { width: 60px; text-align: center; }
.lbl-dmg { width: 140px; text-align: center; }
.lbl-actions { width: 30px; text-align: right; }

.small-add-btn {
    background: #2a2e38;
    color: #8fa3b0;
    border: 1px solid #3a3f4b;
    width: 20px; height: 20px;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
}
.small-add-btn:hover { background: #3a3f4b; color: #fff; }

.attacks-list-clean {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 25px;
}

.attack-row-clean {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Specific Input Styling */
.clean-input {
    background: transparent;
    border: none;
    color: #e0e0e0;
    font-family: sans-serif;
    font-size: 14px;
    outline: none;
    height: 100%;
    width: 100%;
}

.clean-input.name {
    flex: 1;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    padding: 10px;
    border-radius: 4px;
    font-weight: bold;
}
.clean-input.name:focus { border-color: #5b667a; background: #232833; }

/* Bonus Box */
.bonus-box {
    width: 60px;
    height: 45px;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
}
.clean-input.bonus { text-align: center; font-size: 18px; font-weight: bold; }

/* Damage Box */
.damage-box {
    width: 140px;
    height: 45px;
    background: #2a2e38;
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
    padding: 0 10px;
}
.clean-input.damage { font-size: 13px; text-align: center; }

.clean-delete-btn {
    background: transparent; border: none; color: #555;
    font-size: 24px; cursor: pointer; width: 30px; display: flex; justify-content: center;
}
.clean-delete-btn:hover { color: #d32f2f; }

/* --- SHEET TEXTAREAS (Features & Traits) --- */
.sheet-section {
    margin-top: 25px;
    display: flex;
    flex-direction: column;
}

.sheet-label {
    font-family: sans-serif;
    font-size: 11px;
    font-weight: bold;
    color: #8fa3b0;
    text-transform: uppercase;
    margin-bottom: 5px;
    display: flex; align-items: center;
    gap: 5px;
}
.sheet-label::after {
    content: "▲"; 
    font-size: 8px;
    margin-left: 5px;
}

.sheet-textarea {
    width: 100%;
    min-height: 120px;
    background: #1e222b;
    border: 1px solid #3a3f4b;
    border-radius: 4px;
    color: #ccc;
    padding: 12px;
    font-family: sans-serif;
    font-size: 14px;
    resize: vertical;
    line-height: 1.5;
}
.sheet-textarea:focus { outline: none; border-color: #5b667a; background: #232833; }


/* --- SPELLS TAB (Expandable Rows) --- */
.tier-list-container {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.spell-row-item {
    background: #15100d;
    border: 1px solid #333;
    border-radius: 4px;
    overflow: hidden;
    cursor: pointer;
    transition: 0.2s;
}

.spell-row-item:hover {
    background: #1f1814;
    border-color: #5e3a03;
}

.sr-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr; /* Name | Dmg | Dur | Range */
    align-items: center;
    padding: 10px 15px;
    font-family: sans-serif;
    color: #ccc;
}

.sr-name {
    font-weight: bold;
    font-family: "Jaini";
    font-size: 18px;
    color: #fff;
}

.sr-info {
    font-size: 12px;
    color: #888;
    text-align: right;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.sr-info.dmg { color: #ef5350; font-weight: bold; }

/* Expanded Details */
.spell-row-item.expanded {
    border-color: #ffc400;
    background: #1a120b;
}

.sr-details {
    padding: 15px;
    border-top: 1px dashed #5e3a03;
    background: rgba(0,0,0,0.2);
    font-size: 14px;
    line-height: 1.6;
    color: #ddd;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.sr-meta-tags {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    font-size: 11px;
    color: #ffc400;
    text-transform: uppercase;
    font-weight: bold;
}

.delete-spell-btn {
    margin-top: 15px;
    background: transparent;
    border: 1px solid #d32f2f;
    color: #ef5350;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}
.delete-spell-btn:hover { background: #d32f2f; color: #fff; }

/* Додайте це до свого CSS файлу */

.spi-dmg-tag {
    color: #ff5252; /* Червоний колір для шкоди */
    font-weight: bold;
    font-family: sans-serif;
}

/* Якщо хочете, щоб це виглядало як тег */
/*
.spi-dmg-tag {
    background: rgba(255, 82, 82, 0.1);
    color: #ff5252;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
    margin-left: 5px;
}
*/
/* --- SPELL ROWS: COLUMNS --- */
.sr-header {
    display: grid;
    /* Налаштування ширини колонок: Ім'я (гнучке) | Шкода (фікс) | Час (фікс) | Радіус (фікс) */
    grid-template-columns: 1fr 140px 100px 100px; 
    align-items: center;
    padding: 12px 15px;
    font-family: sans-serif;
    color: #ccc;
    gap: 10px;
}

.sr-name {
    font-weight: bold;
    font-family: "Jaini";
    font-size: 20px;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.sr-info {
    font-size: 14px;
    color: #aaa;
    text-align: center; /* Центруємо текст */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Колонка для Шкоди/Хілу */
.sr-info-box {
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    padding: 4px 8px;
    border-radius: 4px;
    min-height: 28px;
}

/* Стиль, якщо шкода (червоний) */
.sr-info-box.stat-dmg {
    color: #ff5252;
    background: rgba(255, 82, 82, 0.1);
    border: 1px solid rgba(255, 82, 82, 0.3);
}

/* Стиль, якщо лікування (зелений) */
.sr-info-box.stat-heal {
    color: #69f0ae;
    background: rgba(105, 240, 174, 0.1);
    border: 1px solid rgba(105, 240, 174, 0.3);
}

/* Badge в модалці (optional) */
.spi-stat-badge {
    margin-left: 5px;
    font-size: 11px;
    padding: 1px 4px;
    border-radius: 3px;
}
.spi-stat-badge.stat-dmg { color: #ff5252; border: 1px solid #ff5252; }
.spi-stat-badge.stat-heal { color: #69f0ae; border: 1px solid #69f0ae; }

/* --- SPELL ICONS & HEADER --- */
.spells-col-header {
    display: grid;
    /* Така сама сітка, як у рядка закляття: Ім'я (гнучке) | Шкода | Час | Радіус */
    grid-template-columns: 1fr 140px 100px 100px;
    padding: 0 15px 5px 15px;
    margin-bottom: 5px;
    border-bottom: 1px solid #333;
    align-items: center;
}

.col-h-name {
    font-size: 12px;
    color: #666;
    font-weight: bold;
}

.col-h-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    color: #666;
}

/* Оновлений хедер рядка закляття (збігається з сіткою вище) */
.sr-header {
    display: grid;
    grid-template-columns: 1fr 140px 100px 100px; 
    align-items: center;
    padding: 12px 15px;
    font-family: sans-serif;
    color: #ccc;
    gap: 10px;
}

/* --- MODAL EXPAND STYLES --- */
.spell-picker-item-wrapper {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid #333;
    border-radius: 6px;
    margin-bottom: 8px;
    transition: 0.2s;
}

.spell-picker-item-wrapper:hover {
    border-color: #5e3a03;
    background: rgba(255, 255, 255, 0.06);
}

.spell-picker-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    cursor: pointer;
}

.spi-left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.spi-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

.spi-chevron {
    color: #666;
    display: flex;
    align-items: center;
}

.spi-level-tag {
    background: #1a120b;
    border: 1px solid #5e3a03;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 4px;
    color: #aaa;
    text-transform: uppercase;
}

.spi-dmg-mini {
    color: #ef5350;
    font-size: 12px;
    font-weight: bold;
}

.spell-picker-details {
    padding: 15px;
    border-top: 1px dashed #333;
    background: rgba(0,0,0,0.2);
    font-size: 14px;
    color: #ccc;
    line-height: 1.5;
}

.spd-meta {
    display: flex;
    gap: 15px;
    margin-bottom: 10px;
    color: #888;
    font-size: 12px;
}

.spd-classes {
    margin-top: 10px;
    font-size: 12px;
    color: #555;
    font-style: italic;
    text-transform: capitalize;
}

/* --- ATTACKS TAB (BROWN/GOLD THEME) --- */

.attack-header-labels {
    display: flex;
    align-items: center;
    padding: 0 10px 5px 10px;
    border-bottom: 2px solid #5e3a03; /* Золота лінія */
    margin-bottom: 15px;
    font-family: sans-serif;
    font-size: 11px;
    font-weight: bold;
    color: #888;
    text-transform: uppercase;
}

.attack-header-labels svg {
    margin-right: 5px;
    vertical-align: text-bottom;
    color: #ffc400; /* Іконки золоті */
}

.lbl-name { flex: 1; display: flex; align-items: center; }
.lbl-bonus { width: 60px; text-align: center; display: flex; justify-content: center; align-items: center; }
.lbl-dmg { width: 140px; text-align: center; display: flex; justify-content: center; align-items: center; }
.lbl-actions { width: 30px; text-align: right; }

.small-add-btn {
    background: #2a1a05;
    color: #888;
    border: 1px solid #5e3a03;
    width: 24px; height: 24px;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
}
.small-add-btn:hover { background: #5e3a03; color: #fff; }

.attacks-list-clean {
    display: flex; flex-direction: column; gap: 10px; margin-bottom: 25px;
}

.attack-row-clean {
    display: flex; align-items: center; gap: 15px;
}

/* --- THEMED INPUTS --- */
.clean-input {
    background: transparent;
    border: none;
    color: #e0e0e0;
    font-family: sans-serif;
    font-size: 14px;
    outline: none;
    height: 100%;
    width: 100%;
}

/* Name Input */
.clean-input.name {
    flex: 1;
    background: #15100d; /* Темно-коричневий фон, як у спелів */
    border: 1px solid #333; /* Тонка рамка */
    padding: 10px;
    border-radius: 4px;
    font-weight: bold;
    font-family: "Jaini"; /* Шрифт як у спелів */
    font-size: 18px;
}
.clean-input.name:focus { border-color: #5e3a03; background: #1a120b; }

/* Bonus Box */
.bonus-box {
    width: 60px; height: 45px;
    background: #15100d;
    border: 1px solid #333;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
}
.clean-input.bonus { text-align: center; font-size: 18px; font-weight: bold; font-family: "Jaini"; color: #ffc400; }

/* Damage Box */
.damage-box {
    width: 140px; height: 45px;
    background: #15100d;
    border: 1px solid #333;
    border-radius: 4px;
    display: flex; justify-content: center; align-items: center;
    padding: 0 10px;
}
.clean-input.damage { font-size: 13px; text-align: center; color: #ef5350; font-weight: bold; }

.clean-delete-btn {
    background: transparent; border: none; color: #555;
    font-size: 24px; cursor: pointer; width: 30px; display: flex; justify-content: center;
}
.clean-delete-btn:hover { color: #d32f2f; }

/* --- THEMED TEXTAREAS --- */
.sheet-section {
    margin-top: 25px; display: flex; flex-direction: column;
}

.sheet-label {
    font-family: "Jaini";
    font-size: 18px;
    color: #ffc400;
    text-transform: uppercase;
    margin-bottom: 5px;
    border-bottom: 1px solid #5e3a03;
}

.sheet-textarea {
    width: 100%; min-height: 120px;
    background: #15100d; /* Темний фон */
    border: 1px solid #333;
    border-radius: 4px;
    color: #ccc;
    padding: 12px;
    font-family: sans-serif;
    font-size: 14px;
    resize: vertical;
    line-height: 1.5;
}
.sheet-textarea:focus { outline: none; border-color: #5e3a03; background: #1a120b; }

/* --- INVENTORY TAB STYLES --- */
.inv-top-row { display: flex; gap: 15px; margin-bottom: 20px; }
.inv-field-group { flex: 1; display: flex; flex-direction: column; gap: 5px; }
.inv-field-group.small { flex: 0 0 120px; }
.inv-field-group label { font-family: sans-serif; font-size: 11px; font-weight: bold; color: #ffc400; text-transform: uppercase; }
.inv-input-box { background: #15100d; border: 1px solid #3a3f4b; border-radius: 4px; color: #e0e0e0; padding: 10px 12px; font-family: "Jaini", system-ui; font-size: 18px; width: 100%; outline: none; }
.inv-input-box:focus { border-color: #ffc400; background: #232833; }
.inv-select-box { background: #1e222b; border: 1px solid #3a3f4b; border-radius: 4px; color: #e0e0e0; padding: 10px; font-family: "Jaini", system-ui; font-size: 18px; width: 100%; outline: none; cursor: pointer; }
.inv-select-box:focus { border-color: #ffc400; }
.sheet-textarea.large { min-height: 180px; }

/* --- ATTACKS TAB (Dark/Gold Theme) --- */
.attack-header-labels { display: flex; align-items: center; padding: 0 10px 5px 10px; border-bottom: 2px solid #5e3a03; margin-bottom: 15px; font-family: sans-serif; font-size: 11px; font-weight: bold; color: #888; text-transform: uppercase; }
.attack-header-labels svg { margin-right: 5px; vertical-align: text-bottom; color: #ffc400; }
.lbl-name { flex: 1; display: flex; align-items: center; }
.lbl-bonus { width: 60px; text-align: center; display: flex; justify-content: center; align-items: center; }
.lbl-dmg { width: 140px; text-align: center; display: flex; justify-content: center; align-items: center; }
.lbl-actions { width: 30px; text-align: right; }
.small-add-btn { background: #2a1a05; color: #888; border: 1px solid #5e3a03; width: 24px; height: 24px; cursor: pointer; font-size: 16px; line-height: 1; border-radius: 4px; display: flex; justify-content: center; align-items: center; }
.small-add-btn:hover { background: #5e3a03; color: #fff; }
.attacks-list-clean { display: flex; flex-direction: column; gap: 10px; margin-bottom: 25px; }
.attack-row-clean { display: flex; align-items: center; gap: 15px; }
.clean-input { background: transparent; border: none; color: #e0e0e0; font-family: sans-serif; font-size: 14px; outline: none; height: 100%; width: 100%; }
.clean-input.name { flex: 1; background: #15100d; border: 1px solid #333; padding: 10px; border-radius: 4px; font-weight: bold; font-family: "Jaini"; font-size: 18px; }
.clean-input.name:focus { border-color: #5e3a03; background: #1a120b; }
.bonus-box { width: 60px; height: 45px; background: #15100d; border: 1px solid #333; border-radius: 4px; display: flex; justify-content: center; align-items: center; }
.clean-input.bonus { text-align: center; font-size: 18px; font-weight: bold; font-family: "Jaini"; color: #ffc400; }
.damage-box { width: 140px; height: 45px; background: #15100d; border: 1px solid #333; border-radius: 4px; display: flex; justify-content: center; align-items: center; padding: 0 10px; }
.clean-input.damage { font-size: 13px; text-align: center; color: #ef5350; font-weight: bold; }
.clean-delete-btn { background: transparent; border: none; color: #555; font-size: 24px; cursor: pointer; width: 30px; display: flex; justify-content: center; }
.clean-delete-btn:hover { color: #d32f2f; }
.sheet-section { margin-top: 25px; display: flex; flex-direction: column; }
.sheet-label { font-family: "Jaini"; font-size: 18px; color: #ffc400; text-transform: uppercase; margin-bottom: 5px; border-bottom: 1px solid #5e3a03; }
.sheet-textarea { width: 100%; min-height: 120px; background: #15100d; border: 1px solid #333; border-radius: 4px; color: #ccc; padding: 12px; font-family: sans-serif; font-size: 14px; resize: vertical; line-height: 1.5; }
.sheet-textarea:focus { outline: none; border-color: #5e3a03; background: #1a120b; }

/* --- SPELLS --- */
.spells-col-header { display: grid; grid-template-columns: 1fr 140px 100px 100px; padding: 0 15px 5px 15px; margin-bottom: 5px; border-bottom: 1px solid #333; align-items: center; }
.col-h-name { font-size: 12px; color: #666; font-weight: bold; }
.col-h-icon { display: flex; justify-content: center; align-items: center; color: #666; }
.sr-header { display: grid; grid-template-columns: 1fr 140px 100px 100px; align-items: center; padding: 12px 15px; font-family: sans-serif; color: #ccc; gap: 10px; }
.sr-name { font-weight: bold; font-family: "Jaini"; font-size: 20px; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sr-info { font-size: 14px; color: #aaa; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sr-info-box { text-align: center; font-weight: bold; font-size: 14px; padding: 4px 8px; border-radius: 4px; min-height: 28px; }
.sr-info-box.stat-dmg { color: #ff5252; background: rgba(255, 82, 82, 0.1); border: 1px solid rgba(255, 82, 82, 0.3); }
.sr-info-box.stat-heal { color: #69f0ae; background: rgba(105, 240, 174, 0.1); border: 1px solid rgba(105, 240, 174, 0.3); }
.spell-row-item { background: #15100d; border: 1px solid #333; border-radius: 4px; overflow: hidden; cursor: pointer; transition: 0.2s; }
.spell-row-item:hover { background: #1f1814; border-color: #5e3a03; }
.spell-row-item.expanded { border-color: #ffc400; background: #1a120b; }
.sr-details { padding: 15px; border-top: 1px dashed #5e3a03; background: rgba(0,0,0,0.2); font-size: 14px; line-height: 1.6; color: #ddd; }
.sr-meta-tags { display: flex; gap: 10px; margin-bottom: 10px; font-size: 11px; color: #ffc400; text-transform: uppercase; font-weight: bold; }
.delete-spell-btn { margin-top: 15px; background: transparent; border: 1px solid #d32f2f; color: #ef5350; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
.delete-spell-btn:hover { background: #d32f2f; color: #fff; }

/* --- MODAL --- */
.spell-settings-modal { width: 600px; max-width: 95vw; background: #100b05; border: 2px solid #835F0A; border-radius: 8px; display: flex; flex-direction: column; max-height: 85vh; color: #e0e0e0; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
.spell-config-body { padding: 20px; overflow-y: auto; flex: 1; }
.filters-row { display: flex; gap: 15px; margin-bottom: 20px; }
.filter-select { flex: 1; background: #1a120b; border: 1px solid #5e3a03; color: #e0e0e0; padding: 10px; font-family: "Jaini"; font-size: 18px; border-radius: 4px; cursor: pointer; }
.filter-select:focus { outline: none; border-color: #ffc400; }
.spell-picker-list { display: flex; flex-direction: column; gap: 10px; }
.spell-picker-item-wrapper { background: rgba(255, 255, 255, 0.03); border: 1px solid #333; border-radius: 6px; margin-bottom: 8px; transition: 0.2s; }
.spell-picker-item-wrapper:hover { border-color: #5e3a03; background: rgba(255, 255, 255, 0.06); }
.spell-picker-header { display: flex; justify-content: space-between; align-items: center; padding: 12px; cursor: pointer; }
.spi-left, .spi-right { display: flex; align-items: center; gap: 10px; }
.spi-chevron { color: #666; display: flex; align-items: center; }
.spi-name { font-size: 20px; color: #fff; font-family: "Jaini"; font-weight: bold; }
.spi-level-tag { background: #1a120b; border: 1px solid #5e3a03; font-size: 10px; padding: 2px 6px; border-radius: 4px; color: #aaa; text-transform: uppercase; }
.spi-dmg-mini { color: #ef5350; font-size: 12px; font-weight: bold; }
.spell-picker-details { padding: 15px; border-top: 1px dashed #333; background: rgba(0,0,0,0.2); font-size: 14px; color: #ccc; line-height: 1.5; }
.spd-meta { display: flex; gap: 15px; margin-bottom: 10px; color: #888; font-size: 12px; }
.spi-btn { padding: 6px 20px; border-radius: 4px; cursor: pointer; font-family: "Jaini"; font-size: 16px; text-transform: uppercase; letter-spacing: 1px; transition: 0.2s; }
.spi-btn.add { background: transparent; color: #888; border: 1px solid #555; }
.spi-btn.add:hover { border-color: #ffc400; color: #ffc400; }
.spi-btn.prepared { background: transparent; color: #4caf50; border: 1px solid #4caf50; box-shadow: 0 0 5px rgba(76, 175, 80, 0.2); }
.spi-btn.prepared:hover { background: rgba(76, 175, 80, 0.1); }
.close-grimoire { width: 100%; background: #835F0A; color: #fff; border: none; font-size: 24px; padding: 15px; font-family: "Jaini"; cursor: pointer; }
.close-grimoire:hover { background: #a07410; }

/* --- TIERED LIST --- */
.spell-tier-block { margin-bottom: 20px; }
.tier-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 10px; }
.th-left { display: flex; align-items: center; gap: 10px; }
.th-level-badge { background: #2a1a05; border: 1px solid #5e3a03; color: #ffc400; font-size: 12px; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
.th-title { font-size: 20px; color: #ccc; font-family: "Jaini"; }
.slot-bubbles { display: flex; gap: 5px; }
.slot-bubble { width: 14px; height: 14px; border: 1px solid #ffc400; border-radius: 50%; cursor: pointer; background: transparent; transition: 0.2s; }
.slot-bubble:hover { transform: scale(1.2); }
.slot-bubble.used { background: #ffc400; box-shadow: 0 0 5px #ffc400; }
.tier-add-btn { background: transparent; border: 1px solid #555; color: #888; padding: 2px 10px; border-radius: 4px; cursor: pointer; font-size: 14px; }
.tier-add-btn:hover { border-color: #ffc400; color: #ffc400; }
.tier-list-container { display: flex; flex-direction: column; gap: 2px; }
.tier-empty { font-style: italic; color: #555; font-size: 14px; padding: 10px; }